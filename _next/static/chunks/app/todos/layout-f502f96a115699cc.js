(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[67],{321:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=r(3464).A.create({baseURL:"https://backend-to-do-list-ys4a.onrender.com/task/api/v1/",headers:{"Content-Type":"application/json"}})},1660:(e,t,r)=>{"use strict";r.d(t,{A:()=>u,O:()=>i});var o=r(5155),l=r(2115),a=r(5695),s=r(321);let n=(0,l.createContext)(void 0),i=e=>{let{children:t}=e,[r,i]=(0,l.useState)(null),[u,c]=(0,l.useState)(null),d=(0,a.useRouter)(),[m,h]=(0,l.useState)(!0);(0,l.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("email");e&&t&&(c(e),i({email:t})),h(!1)},[]);let g=async(e,t)=>{try{let r=await s.A.post("/auth/login",{email:e,password:t});console.log(r.data);let{token:o,email:l}=r.data;if(!o)throw Error("No se recibi\xf3 un token");if(!l)throw Error("No se recibi\xf3 un email");localStorage.setItem("token",o),localStorage.setItem("email",l),c(o),i({email:l}),d.push("/todos")}catch(e){throw console.error("Error en login:",e),Error((null==e?void 0:e.message)||"Error al iniciar sesi\xf3n")}};return(0,o.jsx)(n.Provider,{value:{user:r,token:u,login:g,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("email"),c(null),i(null),d.push("/login")},isLoading:m},children:t})},u=()=>{let e=(0,l.useContext)(n);if(!e)throw Error("useAuth debe usarse dentro de <AuthProvider>");return e}},2633:(e,t,r)=>{Promise.resolve().then(r.bind(r,2793))},2793:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var o=r(5155),l=r(1660),a=r(2115),s=r(5695);function n(e){let{children:t}=e,{user:r,token:n,isLoading:i}=(0,l.A)(),u=(0,s.useRouter)();return((0,a.useEffect)(()=>{i||r&&n||u.push("/login")},[r,n,i,u]),i)?(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,o.jsx)("p",{className:"text-gray-500",children:"Verificando sesi\xf3n..."})}):(0,o.jsx)(o.Fragment,{children:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[794,441,684,358],()=>t(2633)),_N_E=e.O()}]);