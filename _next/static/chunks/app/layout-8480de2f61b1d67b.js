(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{321:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=r(3464).A.create({baseURL:"https://backend-to-do-list-ys4a.onrender.com/task/api/v1/",headers:{"Content-Type":"application/json"}})},347:()=>{},1660:(e,t,r)=>{"use strict";r.d(t,{A:()=>u,O:()=>i});var o=r(5155),l=r(2115),a=r(5695),s=r(321);let n=(0,l.createContext)(void 0),i=e=>{let{children:t}=e,[r,i]=(0,l.useState)(null),[u,c]=(0,l.useState)(null),d=(0,a.useRouter)(),[h,m]=(0,l.useState)(!0);(0,l.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("email");e&&t&&(c(e),i({email:t})),m(!1)},[]);let g=async(e,t)=>{try{let r=await s.A.post("/auth/login",{email:e,password:t});console.log(r.data);let{token:o,email:l}=r.data;if(!o)throw Error("No se recibi\xf3 un token");if(!l)throw Error("No se recibi\xf3 un email");localStorage.setItem("token",o),localStorage.setItem("email",l),c(o),i({email:l}),d.push("/todos")}catch(e){throw console.error("Error en login:",e),Error((null==e?void 0:e.message)||"Error al iniciar sesi\xf3n")}};return(0,o.jsx)(n.Provider,{value:{user:r,token:u,login:g,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("email"),c(null),i(null),d.push("/login")},isLoading:h},children:t})},u=()=>{let e=(0,l.useContext)(n);if(!e)throw Error("useAuth debe usarse dentro de <AuthProvider>");return e}},2549:(e,t,r)=>{Promise.resolve().then(r.bind(r,6903))},6903:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var o=r(5155),l=r(2115),a=r(1660);r(347);var s=r(5695);function n(e){let{children:t}=e,r=(0,s.useRouter)();return(0,l.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("email");e&&t&&r.push("/todos")},[]),(0,o.jsx)(a.O,{children:(0,o.jsx)("html",{lang:"es",children:(0,o.jsx)("body",{children:t})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[690,794,441,684,358],()=>t(2549)),_N_E=e.O()}]);