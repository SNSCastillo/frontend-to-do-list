(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{321:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=a(3464).A.create({baseURL:"https://backend-to-do-list-ys4a.onrender.com/task/api/v1/",headers:{"Content-Type":"application/json"}})},1660:(e,t,a)=>{"use strict";a.d(t,{A:()=>i,O:()=>u});var r=a(5155),l=a(2115),o=a(5695),s=a(321);let n=(0,l.createContext)(void 0),u=e=>{let{children:t}=e,[a,u]=(0,l.useState)(null),[i,c]=(0,l.useState)(null),d=(0,o.useRouter)(),[m,h]=(0,l.useState)(!0);(0,l.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("email");e&&t&&(c(e),u({email:t})),h(!1)},[]);let p=async(e,t)=>{try{let a=await s.A.post("/auth/login",{email:e,password:t});console.log(a.data);let{token:r,email:l}=a.data;if(!r)throw Error("No se recibi\xf3 un token");if(!l)throw Error("No se recibi\xf3 un email");localStorage.setItem("token",r),localStorage.setItem("email",l),c(r),u({email:l}),d.push("/todos")}catch(e){throw console.error("Error en login:",e),Error((null==e?void 0:e.message)||"Error al iniciar sesi\xf3n")}};return(0,r.jsx)(n.Provider,{value:{user:a,token:i,login:p,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("email"),c(null),u(null),d.push("/login")},isLoading:m},children:t})},i=()=>{let e=(0,l.useContext)(n);if(!e)throw Error("useAuth debe usarse dentro de <AuthProvider>");return e}},4204:(e,t,a)=>{"use strict";a.d(t,{default:()=>n});var r=a(5155),l=a(2115),o=a(1660),s=a(5695);function n(){let e=(0,s.useRouter)(),{login:t}=(0,o.A)(),[a,n]=(0,l.useState)(""),[u,i]=(0,l.useState)(""),[c,d]=(0,l.useState)(""),m=async e=>{e.preventDefault(),d("");try{await t(a,u)}catch(e){d("Credenciales inv\xe1lidas")}};return(0,l.useEffect)(()=>{let t=localStorage.getItem("token"),a=localStorage.getItem("email");t&&a&&e.push("/todos")},[]),(0,r.jsxs)("form",{onSubmit:m,className:"max-w-md mx-auto mt-10 space-y-4",children:[(0,r.jsx)("input",{type:"email",placeholder:"Correo",value:a,onChange:e=>n(e.target.value),required:!0,className:"w-full border p-2"}),(0,r.jsx)("input",{type:"password",placeholder:"Contrase\xf1a",value:u,onChange:e=>i(e.target.value),required:!0,className:"w-full border p-2"}),c&&(0,r.jsx)("p",{className:"text-red-600",children:c}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2",children:"Iniciar sesi\xf3n"})]})}},6977:(e,t,a)=>{Promise.resolve().then(a.bind(a,4204))}},e=>{var t=t=>e(e.s=t);e.O(0,[794,441,684,358],()=>t(6977)),_N_E=e.O()}]);